
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documenation for Gluu Server">
      
      
      
      
        <link rel="shortcut icon" href="../../favicon.ico">
      
      <meta name="generator" content="mkdocs+mkdocs-material#1.0.3">
    
    
      
        <title>Google+ OAuth 2.0 - Gluu Docs</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-facb31f4a3.js"></script>
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-f3ab63f78a.css">
      
      
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
	 <div class="md-flex__cell md-flex__cell--shrink">
	    <a href="https://gluu.org/docs/" title="Gluu Docs" class=" md-logo  md-header-nav__button">
          
            <img src="../../gluu.jpg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Administration Guide
                </span>
              
                <span class="md-header-nav__parent">
                  User Authentication Guide
                </span>
              
            
            Google+ OAuth 2.0
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            
              


  


  <a href="https://github.com/GluuFederation/docs-ce-prod/tree/3.0.2/3.0.2" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

            
          </div>
      </div>
    </div>
<!-- Second Nav Bar 
<nav class="md-secondary-header-nav md-grid" style="
    height: 58px;
    background: white;
	color: #555555;
	font-weight: bold;
	font-size; 8px
	overflow: hidden;
">
<div class="md-flex-secondary" style="
    display: table;
    padding: 10px;
">
<label for="Versions">Ver:<select id="versions" onchange="window.location.href=this.value;" style="
    position: relative;
    display: inline-block;
    min-width: 100%;
    /* width: 120%; */
    height: 34px;
    padding: 6px 30px 6px 15px;
    color: #555555;
    border: none;
    background: transparent;
    outline: none;
    -webkit-appearance: none;
    z-index: 99;
    cursor: pointer;
    font-size: 16px;
    margin-bottom: 10px;
    border: 1px;
">
  <option value="/docs">Latest</option>
  <option value="/docs/2.4.4">2.4.4</option>
    </select> 
</label>
 </div>
 </nav>-->
   </nav>
</header>
    
    <div class="md-container">
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary">

  <label class="md-nav__title md-nav__title--site" for="drawer">
    <i class=" md-logo  md-nav__button">
      
        <img src="../../gluu.jpg">
      
    </i>
    Gluu Docs
	<label for="Versions">Ver:
	  <select id="versions" onchange="window.location.href=this.value;" style="
		position: inherit;
		display: inline;
		min-width: 25%;
		/* width: 120%; */
		height: 22px;
		padding: 5px 15px 5px 5px;
		color: Black;
		border: none;
		background: transparent;
		outline: none;
		-webkit-appearance: none;
		z-index: 99;
		cursor: pointer;
		font-size: 10px;
		margin-bottom: 10px;
		border: 1px solid black;
		overflow: auto
	">
	  <option value="/docs/ce/3.0.2">3.0.2</option>
	  <option value="/docs/ce/3.0.1">3.0.1</option>
	  <option value="/docs/ce/2.4.4">2.4.4</option>
	  <option value="/docs">All Versions</option>
		</select> 
	</label>
  </label>
    
    <div class="md-nav__source">
      


  


  <a href="https://github.com/GluuFederation/docs-ce-prod/tree/3.0.2/3.0.2" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  <li class="md-nav__item">
    
      <a href="../.." title="Home" class="md-nav__link">
        Home
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../operation/intro/" title="Whats new in 3.x" class="md-nav__link">
        Whats new in 3.x
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Installation Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3">
        Installation Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../installation-guide/" title="Preparing VM" class="md-nav__link">
        Preparing VM
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installation-guide/install/" title="Install Gluu Server" class="md-nav__link">
        Install Gluu Server
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installation-guide/setup_py/" title="Setup Script Options" class="md-nav__link">
        Setup Script Options
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Upgrade/Patch Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3-4">
        Upgrade/Patch Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../upgrade/" title="Upgrade Gluu Server" class="md-nav__link">
        Upgrade Gluu Server
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../upgrade/manual-update/" title="Upgrade Gluu Server with OpenDJ" class="md-nav__link">
        Upgrade Gluu Server with OpenDJ
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../upgrade/update-war/" title="Updating a War File" class="md-nav__link">
        Updating a War File
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Administration Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4">
        Administration Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../admin-guide/oxtrust-ui/" title="oxTrust admin UI" class="md-nav__link">
        oxTrust admin UI
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../admin-guide/custom-script/" title="Interception Scripts" class="md-nav__link">
        Interception Scripts
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3" checked>
    
    <label class="md-nav__link" for="nav-4-3">
      User Authentication Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4-3">
        User Authentication Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../intro/" title="User Authentication Introduction" class="md-nav__link">
        User Authentication Introduction
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../basic/" title="Basic Authenticatoin" class="md-nav__link">
        Basic Authenticatoin
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../passport/" title="Social Authentication" class="md-nav__link">
        Social Authentication
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../supergluu/" title="Super Gluu" class="md-nav__link">
        Super Gluu
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../U2F/" title="FIDO U2F" class="md-nav__link">
        FIDO U2F
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../duo/" title="Duo Security" class="md-nav__link">
        Duo Security
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../cert-auth/" title="Certificate Authentication" class="md-nav__link">
        Certificate Authentication
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Google+ OAuth 2.0
      </label>
    
    <a href="./" title="Google+ OAuth 2.0" class="md-nav__link md-nav__link--active">
      Google+ OAuth 2.0
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-google" title="Configure Google" class="md-nav__link">
    Configure Google
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-oxtrust" title="Configure oxTrust" class="md-nav__link">
    Configure oxTrust
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-google-app" title="Setting Google App" class="md-nav__link">
    Setting Google App
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../otp/" title="HOTP/TOTP" class="md-nav__link">
        HOTP/TOTP
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../customauthn/" title="Custom Authentication" class="md-nav__link">
        Custom Authentication
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../admin-guide/user-group/" title="User Management" class="md-nav__link">
        User Management
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../admin-guide/session/" title="Session Timeout" class="md-nav__link">
        Session Timeout
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../admin-guide/saml/" title="SAML" class="md-nav__link">
        SAML
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../admin-guide/openid-connect/" title="OpenID Connect" class="md-nav__link">
        OpenID Connect
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../admin-guide/uma/" title="UMA" class="md-nav__link">
        UMA
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../admin-guide/scim-uma/" title="SCIM protected by UMA" class="md-nav__link">
        SCIM protected by UMA
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../admin-guide/certificate/" title="Certificate Management" class="md-nav__link">
        Certificate Management
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Integration Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5">
        Integration Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/" title="Introduction" class="md-nav__link">
        Introduction
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Mobile Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5-2">
        Mobile Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/mobile/appauth-oauth2.0-android/" title="Android" class="md-nav__link">
        Android
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/mobile/App-Auth-IOS/" title="iOS" class="md-nav__link">
        iOS
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Single Page Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5-3">
        Single Page Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/spa/angular/" title="Angular" class="md-nav__link">
        Angular
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/spa/javascript/" title="JavaScript" class="md-nav__link">
        JavaScript
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/spa/jquery/" title="jQuery" class="md-nav__link">
        jQuery
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/spa/react/" title="React" class="md-nav__link">
        React
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Web Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5-4">
        Web Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/apache/" title="Apache" class="md-nav__link">
        Apache
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/csharp/" title="C Sharp" class="md-nav__link">
        C Sharp
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/go/" title="GO" class="md-nav__link">
        GO
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/java/" title="Java" class="md-nav__link">
        Java
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/play/" title="Java Play" class="md-nav__link">
        Java Play
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/springmvc/" title="Java Spring MVC" class="md-nav__link">
        Java Spring MVC
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/springsecurity/" title="Java Spring Security" class="md-nav__link">
        Java Spring Security
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/net/" title=".NET" class="md-nav__link">
        .NET
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/node/" title="Node" class="md-nav__link">
        Node
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/nginx/" title="Nginx" class="md-nav__link">
        Nginx
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/perl/" title="Perl" class="md-nav__link">
        Perl
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/python/" title="Python" class="md-nav__link">
        Python
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/flask/" title="Python Flask" class="md-nav__link">
        Python Flask
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/ruby/" title="Ruby" class="md-nav__link">
        Ruby
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/webapps/rails/" title="Ruby On Rails" class="md-nav__link">
        Ruby On Rails
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/saml-sp/" title="Shibboleth SP" class="md-nav__link">
        Shibboleth SP
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/openidc-rp/" title="mod_auth_openidc" class="md-nav__link">
        mod_auth_openidc
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      Backend APIs
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5-5">
        Backend APIs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/api/intro/" title="api" class="md-nav__link">
        api
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6" type="checkbox" id="nav-5-6">
    
    <label class="md-nav__link" for="nav-5-6">
      Off-the-Shelf Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5-6">
        Off-the-Shelf Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6-1" type="checkbox" id="nav-5-6-1">
    
    <label class="md-nav__link" for="nav-5-6-1">
      SaaS
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5-6-1">
        SaaS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/saas/google/" title="Google SSO" class="md-nav__link">
        Google SSO
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/saas/office/" title="Office 365" class="md-nav__link">
        Office 365
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/saas/salesforce/" title="Salesforce" class="md-nav__link">
        Salesforce
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/saas/dropbox/" title="Dropbox" class="md-nav__link">
        Dropbox
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6-2" type="checkbox" id="nav-5-6-2">
    
    <label class="md-nav__link" for="nav-5-6-2">
      FOSS
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5-6-2">
        FOSS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/foss/drupal/" title="Drupal" class="md-nav__link">
        Drupal
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/foss/magento/" title="Magento" class="md-nav__link">
        Magento
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/foss/nextcloud/" title="NextCloud" class="md-nav__link">
        NextCloud
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/foss/opencart/" title="OpenCart" class="md-nav__link">
        OpenCart
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/foss/roundcube/" title="RoundCube" class="md-nav__link">
        RoundCube
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/foss/sugarcrm/" title="SugarCRM" class="md-nav__link">
        SugarCRM
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/foss/suitecrm/" title="SuiteCRM" class="md-nav__link">
        SuiteCRM
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/foss/shopify/" title="Shopify" class="md-nav__link">
        Shopify
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/foss/wordpress/" title="Wordpress" class="md-nav__link">
        Wordpress
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1" type="checkbox" id="nav-6-1">
    
    <label class="md-nav__link" for="nav-6-1">
      Gluu API Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6-1">
        Gluu API Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../api-guide/api/" title="Custom ID Generation" class="md-nav__link">
        Custom ID Generation
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../api-guide/openid-connect-api/" title="OpenID Connect API" class="md-nav__link">
        OpenID Connect API
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../api-guide/scim-api/" title="SCIM API Configuration" class="md-nav__link">
        SCIM API Configuration
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../api-guide/uma-api/" title="UMA API" class="md-nav__link">
        UMA API
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      JSON Properties
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6-2">
        JSON Properties
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../reference/JSON-oxtrust-prop/" title="OxTrust JSON Properties" class="md-nav__link">
        OxTrust JSON Properties
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../reference/JSON-oxauth-prop/" title="OxAuth JSON Properties" class="md-nav__link">
        OxAuth JSON Properties
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      Gluu LDAP Schema
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6-3">
        Gluu LDAP Schema
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../reference/oxldap/" title="Ox LDAP Properties" class="md-nav__link">
        Ox LDAP Properties
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../reference/schema/" title="OpenLDAP Schema" class="md-nav__link">
        OpenLDAP Schema
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Operation Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-7">
        Operation Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../operation/backup/" title="Backups" class="md-nav__link">
        Backups
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../operation/find-gluu-version/" title="Find your Gluu Version" class="md-nav__link">
        Find your Gluu Version
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../operation/ports/" title="Ports" class="md-nav__link">
        Ports
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../operation/logout/" title="Single Logout (SLO)" class="md-nav__link">
        Single Logout (SLO)
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../operation/logs/" title="Log Management" class="md-nav__link">
        Log Management
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../operation/faq/" title="FAQ & Troubleshooting" class="md-nav__link">
        FAQ & Troubleshooting
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../operation/custom-loginpage/" title="Customize Login Page" class="md-nav__link">
        Customize Login Page
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Developer Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-8">
        Developer Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../developer-guide/oxtrust-eclipse/" title="Build OxTrust with Eclipse" class="md-nav__link">
        Build OxTrust with Eclipse
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-google" title="Configure Google" class="md-nav__link">
    Configure Google
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-oxtrust" title="Configure oxTrust" class="md-nav__link">
    Configure oxTrust
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-google-app" title="Setting Google App" class="md-nav__link">
    Setting Google App
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
                 <a href="https://github.com/GluuFederation/docs-ce-prod/tree/3.0.2/3.0.2/source/authn-guide\google.md" title="Edit this page" class="md-icon md-content__edit">edit</a>
               
              
                
                <h1 id="google-oauth-20-login">Google+ OAuth 2.0 Login<a class="headerlink" href="#google-oauth-20-login" title="Permanent link">#</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p>This document will explain how to use Gluu's 
<a href="https://raw.githubusercontent.com/GluuFederation/oxAuth/master/Server/integrations/gplus/GooglePlusExternalAuthenticator.py">gplus interception script</a> to configure the Gluu Server to send users to Google for authentication. </p>
<h2 id="configure-google">Configure Google<a class="headerlink" href="#configure-google" title="Permanent link">#</a></h2>
<p>In order to call Google API's you will need to register as a developer and
create client credentials. You can follow these 
<a href="https://developers.google.com/identity/protocols/OAuth2">instructions</a>.</p>
<p>The first thing you'll need to do is Create a Project on Google to obtain
client credentials. Click "Create project" and enter your desired
project name.        </p>
<p><img alt="image" src="../../img/admin-guide/multi-factor/01-create-project.png" />              </p>
<p>Then click on your newly created project from the listing on the
dashboard, and under the Credentials section, create a new "OAuth 2.0
client ID".        </p>
<p><img alt="image" src="../../img/admin-guide/multi-factor/02-create-oauth2-creds.png" />       </p>
<p>Google will ask you to configure your consent screen, to add your logo
and other information displayed to the user to authorize Google to
release information.       </p>
<p><img alt="image" src="../../img/admin-guide/multi-factor/03-create-oauth2-creds.png" />       </p>
<p>Fill out the form...       </p>
<p><img alt="image" src="../../img/admin-guide/multi-factor/04-configure-authorization-page.png" />       </p>
<p>Now you're ready to create the credentials. Enter "Authorized JavaScript
origins". It should be the uri of your Gluu Server--for example <code>https://idp.example.com</code>.       </p>
<p><img alt="image" src="../../img/admin-guide/multi-factor/05-create-oauth2-creds.png" />       </p>
<p>Google will display the client-id and secret. Ignore that for now. Instead, download the JSON file which you are going to upload into
your Gluu Server next.       </p>
<p><img alt="image" src="../../img/admin-guide/multi-factor/06-download_json.png" />       </p>
<p>Move this file to the location <code>/etc/gluu/conf/google.json</code>. The JSON
file will look something like this example:       </p>
<pre><code>{
  &quot;web&quot;: {
    &quot;client_id&quot;: &quot;7a64e55f-724d4e8c91823d5f1f18a0b2.apps.googleusercontent.com&quot;,
    &quot;auth_uri&quot;: &quot;https:\/\/accounts.google.com\/o\/oauth2\/auth&quot;,
    &quot;token_uri&quot;: &quot;https:\/\/accounts.google.com\/o\/oauth2\/token&quot;,
    &quot;auth_provider_x509_cert_url&quot;: &quot;https:\/\/www.googleapis.com\/oauth2\/v1\/certs&quot;,
    &quot;client_secret&quot;: &quot;bb76a2c99be94e35b874&quot;,
    &quot;javascript_origins&quot;: [
    &quot;https:\/\/brookie.gluu.info&quot;
    ]
  }
}
</code></pre>

<p>The last step is to enable Google+ API's:       </p>
<ul>
<li>Navigate back to the Google API <a href="https://console.developers.google.com/project">console</a></li>
<li>Select project and enter project name</li>
<li>Open new project "API &amp; auth -&gt; API" menu item in configuration navigation tree</li>
<li>Click "Google+ API"</li>
<li>Click "Enable API" button</li>
</ul>
<h2 id="configure-oxtrust">Configure oxTrust<a class="headerlink" href="#configure-oxtrust" title="Permanent link">#</a></h2>
<p>Follow the steps below to configure the certificate authentication in the oxTrust Admin GUI.       </p>
<ol>
<li>
<p>Navigate to <code>Configuration</code> &gt; <code>Manage Custom Scripts</code> &gt; <code>Person Authentication</code>.        </p>
</li>
<li>
<p>Click the <code>Add Custom Scritp</code> button     <br />
<a href="../../img/admin-guide/multi-factor/add-script-button.png">add-script-button</a>       </p>
</li>
<li>
<p>Fill in the form and add the <a href="https://raw.githubusercontent.com/GluuFederation/oxAuth/master/Server/integrations/gplus/GooglePlusExternalAuthenticator.py">Google External Authenticator</a> Script.       </p>
</li>
</ol>
<p>You'll also need to add some custom properties:       </p>
<ul>
<li><strong>gplus_client_secrets_file</strong>: <code>/etc/gluu/conf/google.json</code></li>
<li><strong>gplus_deployment_type</strong>: enroll</li>
<li><strong>gplus_remote_attributes_list</strong>: email, given_name, family_name, and locale</li>
<li>
<p><strong>gplus_local_attributes_list</strong>: uid, mail, givenName, sn, cn, preferredLanguage</p>
</li>
<li>
<p><strong>gplus_client_secrets_file</strong> - It is a mandatory property that holds
   the path to the application configuration file downloaded from Google
   console for application. An example is <code>/etc/certs/gplus_client_secrets.json</code>.</p>
</li>
</ul>
<h3 id="setting-google-app">Setting Google App<a class="headerlink" href="#setting-google-app" title="Permanent link">#</a></h3>
<p>These are the single steps needed to ClientSecret and ClientID or Google JSON:</p>
<p>a) Log into: <code>https://console.developers.google.com/project</code></p>
<p>b) Click "Create project" and enter project name</p>
<p>c) Open new project "API &amp; auth -&gt; Credentials" menu item in configuration navigation tree</p>
<p>d) Click "Add credential" with type "OAuth 2.0 client ID"</p>
<p>e) Select "Web application" application type</p>
<p>f) Enter "Authorized JavaScript origins". It should be CE server DNS
       name, for example <code>https://gluu.info</code>.</p>
<p>g) Click "Create" and Click "OK" in next dialog</p>
<p>h) Click "Download JSON" in order to download
       <code>gplus_client_secrets.json</code> file.</p>
<p>Also it is mandatory to enable Google+ API:</p>
<p>a) Log into <code>https://console.developers.google.com/project</code></p>
<p>b) Select project and enter project name</p>
<p>c) Open new project "API &amp; auth -&gt; API" menu item in configuration navigation tree</p>
<p>d) Click "Google+ API"</p>
<p>e) Click "Enable API" button</p>
<ol>
<li>
<p><strong>gplus_deployment_type</strong> - Specify the deployment mode. It is an
optional property. If this property isn't specified the script tries to
find the user in the local LDAP by 'subject_identifier' claim specified
in id_token. If this property has a 'map' value the script allows to map
'subject_identifier' to the local user account. If this property has an
'enroll' value the script adds a new user to the local LDAP with status
'active'. In order to map the IDP attributes to the local attributes it
uses properties from both gplus_remote_attributes_list and
gplus_local_attributes_list. The allowed values are map and enroll.</p>
</li>
<li>
<p><strong>gplus_remote_attributes_list</strong> - Comma-separated list of attribute
names (user claims) that Google+ returns which map to local attributes
in the <code>gplus_local_attributes_list</code> property. It is mandatory only if
<code>gplus_deployment_type</code> is set to 'enroll'.</p>
</li>
<li>
<p><strong>gplus_local_attributes_list</strong> - Comma-separated list of Gluu Server
LDAP attribute names that are mapped to Google user claims from the
<code>gplus_remote_attributes_list</code> property. It is mandatory only if
<code>gplus_deployment_type</code> is set to 'enroll'.</p>
</li>
<li>
<p><strong>extension_module</strong> - Optional property to specify the full path of
an external module that implements two methods:</p>
</li>
</ol>
<pre><code class="python">    # This is called when the authentication script initializes
    def init(conf_attr):
        # Code here
        return True/False

    # This is called after authentication
    def postLogin(conf_attr, user):
        # Code here
        return True    # or return False
</code></pre>

<ol>
<li><strong>gplus_client_configuration_attribute</strong> - Optional property to
specify the client entry attribute name which can override
<code>gplus_client_secrets_file file</code> content. It can be used in cases when
all clients should use a separate <code>gplus_client_secrets.json</code>
configuration.</li>
</ol>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">#</a></h2>
<p>One simple way to test the configuration is to use oxTrust. In the
"Configure Authentication" dropdown menu, select "Google" (or whatever
you entered as the "Name" of the custom authentication script--as the
default authentication method.       </p>
<p><img alt="image" src="../../img/admin-guide/multi-factor/08-select_default_authentication.png" />       </p>
<p>After you login and logout, you should be presented with a new login
form that has the Google login button:       </p>
<p><img alt="image" src="../../img/admin-guide/multi-factor/09-google-authentication-button.png" />       </p>
<p>After clicking the Google login button, you are presented for
authorization--Google needs to make sure its ok to release attributes to
the Gluu Server:       </p>
<p><img alt="image" src="../../img/admin-guide/multi-factor/10-google-authorization.png" />       </p>
<p>If the script doesn't work, and you locked yourself out of oxTrust,
don't worry! You can create an LDIF file, for example <code>revert.ldif</code>, to
set back the default authentication method, like this:       </p>
<pre><code>dn: inum=@!1E3B.F133.14FA.5062!0002!4B66.CF9C,ou=appliances,o=gluu
changetype: modify
replace: oxAuthenticationMode
oxAuthenticationMode: internal
</code></pre>

<p>oxAuthenticationMode corresponds to the 'Name' of the customer
authentication script in oxTrust. Use <code>internal</code> to revert to the
default LDAP authentication. You'll have to change the <code>inum</code> with the
<code>inum</code> of your installation. You can find it using ldapsearch like this:</p>
<pre><code>root@gluu3-ubuntu:/opt/symas/bin# ./ldapsearch -h locahost -p 1389 -D &quot;cn=directory manager,o=gluu&quot; -w &quot;{password provided during setup}&quot; -b &quot;ou=appliances,o=gluu&quot; -s one &quot;objectclass=*&quot; inum
</code></pre>

<p><code>~/.pw</code> is a file with your Directory Manager password. If you don't
remember it, try to find it using <code>grep</code>: </p>
<pre><code>grep ldapPass= /install/community-edition-setup/setup.properties.last
</code></pre>

<p>Once your LDIF looks ok, then use <code>ldapmodify</code> to revert back to
password authentication:</p>
<pre><code>root@gluu3-ubuntu:/opt/symas/bin# ./ldapmodify -h localhost -p 1389 -D &quot;cn=directory manager,o=gluu&quot; -w &quot;{password provided during setup}&quot; -f revert.ldif
</code></pre>

<p>If things go wrong, it can leave the sessions in your browser in a bad
state. If things get really weird, remove the cookies in your browser
for the hostname of your Gluu Server.</p>
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../cert-auth/" title="Certificate Authentication" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Certificate Authentication
              </span>
            </div>
          </a>
        
        
          <a href="../otp/" title="HOTP/TOTP" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                HOTP/TOTP
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017, Gluu, Inc.
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-2afe21e0b2.js"></script>
      <script>var config={url:{base:"../.."}},app=new Application(config);app.initialize()</script>
      
    
    
      
    
  </body>
</html>